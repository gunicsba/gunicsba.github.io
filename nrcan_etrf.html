<html>
	<head>
		<title>NRCAN ETRF2000 konvertáló</title>
	</head>
<body>
	
	Először is töltsük le a fájlokat a <a href="http://basegnss.local">PI-ről</a><br>
	Nyissuk meg a LOGS fület aztán a ZIP fájl melletti ceruzát válasszuk ki:<br>
	<img src="log2rinexshort.png" width="800"><img><br><br>
	Válaszd ki az NRCAN opciót és úgy töltsd le a Rinex fájlt.<br>
	<img src="nrcan.png" width="300"><img><br><br>
	Nyisd meg az <strong><a href="https://webapp.csrs-scrs.nrcan-rncan.gc.ca/geod/tools-outils/ppp.php">NRCAN</a> weboldalt és Static ITRF kalkulációval számítsuk ki ITRF -ben a poziciót.</strong><br>
<br/>
<h1><div id="problem"></div></h1>
<hr>
Az NRCAN e-mailben a Summary gombra kattintva másold ide az egész tartalmat<br>
<textarea id="NRCAN" rows="23" cols="80">
The estimated coordinates ITRF20 2023-05-23 for the 2023-05-24-MP8156_nrcan.obs RINEX file are as follows:

Latitude	N46° 55' 23.3370"	± 0.002 m (95%)
Longitude	E21° 15' 27.1687"	± 0.002 m (95%)
Ellipsoidal Height	135.786 m	± 0.008 m (95%)
[46.92314917,21.25754686,135.786]
UTM Zone 34 (North)
Northing	5196656.204 m
Easting	519608.202 m
Scale factor (point)	0.99960473
Scale factor (combined)	0.99958345
[5196656.204,519608.202,135.786]

Cartesian coordinates
X	4067097.148	± 0.006 m (95%)
Y	1582224.335	± 0.003 m (95%)
Z	4636033.121	± 0.006 m (95%)
[4067097.148,1582224.335,4636033.121]
Orbits and Clocks Used: NRCan Rapid
GNSS Data: GPS & GLONASS
GRS80 ellipsoid used for (x,y,z) to (lat,lon,h) transformation
</textarea><br>
<br>
<input type = "button" onclick = "szamol()" value = "Szamolj!">  <br>
<form name=ecttform method=post action=https://www.epncb.oma.be/_productsservices/coord_trans/index.php>

<input type=hidden id=epochtype name=epochtype value='date'><br>
<input type=hidden id=from_frame_in name=from_frame_in value='ITRF2020'>
<input type=hidden id=from_epoch_date name=from_epoch_date value=''>
<input type=hidden id=to_frame_out name=to_frame_out value='ETRF2000'><br>
Epoch<input type=text id=to_epoch_date name=to_epoch_date value='2000-01-01'><br>
Koordinatak<input type=text id=inputvalues name=inputvalues><br>
<input type=hidden id=transform_button name=transform_button value='Transform'><br><br>

<input type='submit' value='ECTT megnyitása új lapon' 

onclick="this.form.target='_blank';return true;">

</form><br>
Másoljuk ki ezeket: <img src="coordinate_to_copy.png"></img> <br>

Után nyissuk meg ezt:<h3><a href="https://tool-online.com/en/coordinate-converter.php">Cartesian -> WGS84</a></h3> <br>
<br>
Bal oldalon: WORLD + Cartesian (XYZ)  ide kell beírni az X-Y-Z értékeinket<br>

Jobb oldalon: Deutschland + WGS84 ide pedig a konverzió után az európai értékeink kerülnek :) <br>

<img src="coordinate_converter_sample.png"></img><br>

Az így kapott eredményeket pedig írhatjuk vissza a PIbe :) <br>

<strong>Lat Lon H</strong>   sorrendben!

<br><hr>

2 pont közötti távolság számításához<a href="https://www.omnicalculator.com/other/latitude-longitude-distance"> kalkulátor</a><br>
Az ötletet innen kaptuk: <a href="https://forum.geocommuns.fr/t/coordinates-transformation-hors-zone-rgf93/827/23?u=gunicsba">Geocomms forum</a><br>

<br> Változások: </br>
* Több kép / linkek - 2023-06-11
	
<html>
</body>
<!--
	curl --location --request 
	GET 'https://eht2.gnssnet.hu/api/transformation/eov-to-etrs89?pointNumber=12&x=184415.841&y=722440.365&h=57.460'
-->
<script type="text/javascript">
function szamol(){
	document.getElementById('problem').innerHTML ="";
	var data = document.getElementById('NRCAN').value;
	//is it ITRF20?
	console.log(data.length);
	console.log(data.replaceAll("ITRF20","").length);
	if(data.length == data.replaceAll("ITRF20","").length){
		console.log("so we didn't replace anything..");
		document.getElementById('problem').innerHTML =" Nem ITR20 a kalkuláció, biztos, hogy Static ITRF-et választottál NRCAN alatt?";
		return;
	}
	//Epoch?
	const epochRe =/ITRF20 ([0-9-]{10}) /g;
	var epoch = epochRe.exec(data)[1];
	document.getElementById('from_epoch_date').value=epoch;
	document.getElementById('to_epoch_date').value=epoch;

	//Cartesian
	var cartesian = data.split("\n")[17].replace("[","").replace("]",""); 
	document.getElementById('inputvalues').value ='agopengps '+cartesian.replace(","," ").replace(","," ");

	
}

</script>
