<link
  href="https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.css"
  rel="stylesheet"
/>
<script src="https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.js"></script>
<script src="https://api.mapbox.com/mapbox.js/plugins/turf/v3.0.11/turf.min.js"></script>
<!-- <script src='libs/turf.min.js'></script> -->
<style type="text/css">
	body {
  margin: 0;
  padding: 0;
}

#map {
  position: absolute;
  top: 100;
  bottom: 100;
  width: 75%;
}
</style>
<html>
<body>
	<textarea cols=40 id="EOVIN">17.8561445199,47.0714095442,0
17.8562384832,47.0713295533,0
17.8563713391,47.0712769579,0
17.8563849057,47.0712591059,0
17.8565045962,47.0712063731,0
17.8565070055,47.0710984378,0
17.8565078085,47.0710624593,0
17.8564948443,47.0710533275,0
17.8564685142,47.0710530531,0
17.8564553492,47.0710529159,0
17.8564421841,47.0710527787,0
17.8564158540,47.0710525043,0
17.8564026890,47.0710523671,0
17.8563629931,47.0710609501,0
17.8563498280,47.0710608128,0
17.8563234979,47.0710605384,0
17.8563105337,47.0710514066,0
17.8562975695,47.0710422748,0
17.8562977703,47.0710332801,0
17.8562979711,47.0710242855,0
17.8562981719,47.0710152909,0
17.8562991759,47.0709703179,0
17.8563129433,47.0709434713,0
17.8562868141,47.0709342022,0
17.8561555657,47.0709148407,0
17.8560241165,47.0709044737,0
17.8559582914,47.0709037874,0
17.8557735796,47.0709198548,0
17.8557338837,47.0709284376,0
17.8557075537,47.0709281630,0
17.8555757027,47.0709357846,0
17.8555096767,47.0709440927,0
17.8554570166,47.0709435434,0
17.8554175216,47.0709431315,0
17.8553652635,47.0709245930,0
17.8552735104,47.0709056424,0
17.8551697984,47.0708325868,0
17.8551179425,47.0707960590,0
17.8551053805,47.0707689378,0
17.8550559369,47.0706244747,0
17.8550324214,47.0704982755,0
17.8549963441,47.0703449551,0
17.8549159477,47.0704070930,0
17.8549149425,47.0704520661,0
17.8549277053,47.0704701927,0
17.8549522258,47.0705514189,0
17.8549889061,47.0706777555,0
17.8550140299,47.0707319978,0
17.8550640765,47.0708494772,0
17.8550894014,47.0708947249,0
17.8551274893,47.0709580992,0
17.8551400513,47.0709852204,0
17.8551653764,47.0710304681,0
17.8551649744,47.0710484574,0
17.8551777374,47.0710665839,0
17.8551769334,47.0711025623,0
17.8551627634,47.0711473980,0
17.8551621604,47.0711743818,0
17.8551481913,47.0712102229,0
17.8551068870,47.0712907623,0
17.8551064849,47.0713087515,0
17.8550929178,47.0713266033,0
17.8550921138,47.0713625818,0
17.8551046758,47.0713897029,0
17.8551174389,47.0714078295,0
17.8551304031,47.0714169615,0
17.8551433672,47.0714260934,0
17.8551824606,47.0714444947,0
17.8552219560,47.0714449067,0
17.8552744156,47.0714544507,0
17.8553141120,47.0714458681,0
17.8553669735,47.0714374228,0
17.8553933037,47.0714376975,0
17.8554198350,47.0714289775,0
17.8554595313,47.0714203949,0
17.8554862635,47.0714026803,0
17.8554996296,47.0713938230,0
17.8555261607,47.0713851030,0
17.8555395268,47.0713762457,0
17.8556330891,47.0713142446,0
17.8556596202,47.0713055246,0
17.8556729862,47.0712966673,0
17.8556995174,47.0712879473,0
17.8557258476,47.0712882219,0
17.8557390126,47.0712883591,0
17.8557651419,47.0712976283,0
17.8558435299,47.0713254358,0
17.8559350831,47.0713533805,0
17.8560007078,47.0713630614,0
17.8560661317,47.0713817369,0
17.8560924619,47.0713820114,0
17.8561185913,47.0713912805,0
17.8561445199,47.0714095442,0
</textarea> <br>
<input type = "button" onclick = "szamol()" value = "Bemenet tablazatra alakitasa!"></input>  <br><br>
<div id="output"></div>
<div id="map"></div>
</body>

<script type="text/javascript">
function szamol(){

	document.getElementById('output').innerHTML = "pina!";
	var lines = document.getElementById('EOVIN').value.replaceAll(",0","").split("\n");
	
	var data = "[";
	for(var i = 0; i <= lines.length;i++){
		if(String(lines[i]).length < 10) continue;
		if(data.length > 5) data += ',';
		data += '[' + lines[i] + ']';
		document.getElementById('output').innerHTML += lines[i];
	}
	data += "]";
	console.log(myCoordinates);
	myCoordinates = JSON.parse(data);
	console.log(myGeoJson);
	map.getSource('pina').setData(myGeoJson);
	myGeoJson.geometry.coordinates = myCoordinates;
	console.log(myGeoJson);
	map.getSource('pina').setData(myGeoJson);
	console.log(myCoordinates);

}

	mapboxgl.accessToken = 'pk.eyJ1IjoiZ3VuaWNzYmEiLCJhIjoiY2x2emdtODF5MDJyZzJrcGg4anFocDMzZiJ9.5AHFwVRqLvSlNfCDx1musA';
	const map = new mapboxgl.Map({
  	container: 'map', // container id
  	style: 'mapbox://styles/mapbox/light-v11', // stylesheet location
  	center: [17, 47], // starting position
  	zoom: 12 // starting zoom
	});
	//JSON.parse
	var myCoordinates = [[17.854, 47.072],[17.855, 47.070],[17.856, 47.071]];
  	console.log(myCoordinates);
  const myGeoJson =  { 
    		type: 'Feature',
    		properties: {},
    		geometry: {
    			type: 'LineString',
    			coordinates: myCoordinates
    			//[[17.854, 47.072],[17.855, 47.070],[17.856, 47.071]]
    		}
      };
	map.on('load', () => {
		map.addSource('pina',{type: 'geojson', data: myGeoJson });
  	map.addLayer({
    	id: 'pina',
    	type: 'fill',
    	source: 'pina',
//    source: {
//      type: 'geojson',
//      data: myGeoJson
//    },
    	paint: {}
  	});
	});

  var bbox = turf.bbox(features);
</script>

</html>
